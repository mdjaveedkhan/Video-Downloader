<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Downloader Pro</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        .progress-container { width: 100%; background: #eee; border-radius: 5px; margin-top: 20px; display: none; }
        #progress-bar { width: 0%; height: 20px; background: #28a745; border-radius: 5px; text-align: center; color: white; }
    </style>
</head>
<body>

<div class="container">
    <h1>Video Downloader</h1>
    <form action="/download" method="POST" onsubmit="startTracking()">
        <input type="text" name="url" placeholder="Paste link here" required>
        <select name="format">
            <option value="mp4">MP4 (Video)</option>
            <option value="mp3">MP3 (Audio)</option>
        </select>
        <select name="quality">
            <option value="best">Best Quality</option>
            <option value="1080">1080p</option>
            <option value="720">720p</option>
        </select>
        <button onclick="startDownload()">Download</button>
    </form>

    <div class="progress-container" id="p-container">
        <div id="progress-bar">0%</div>
    </div>
      
    <p id="status"></p>
</div>

<script>

function startDownload() {

    const url = document.getElementById("url").value;

    const format = document.getElementById("format").value;

    const quality = document.getElementById("quality").value;



    document.getElementById("status").innerText = "⏳ Downloading...";



    const formData = new FormData();

    formData.append("url", url);

    formData.append("format", format);

    formData.append("quality", quality);



    fetch("/download", {

        method: "POST",

        body: formData

    })

    .then(res => res.json())

    .then(data => {

        if (data.success) {

            document.getElementById("status").innerText = "✅ Download Completed!";

        } else {

            document.getElementById("status").innerText = "❌ Error: " + data.error;

        }

    });

}

</script>

</body>
</html>